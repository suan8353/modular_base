# ModularBase

**极简基座 + 可插拔数据包** —— 让 4GB 显卡也能运行专业级 AI

[![Status](https://img.shields.io/badge/Status-Active%20Development-blue)]()
[![License](https://img.shields.io/badge/License-Apache%202.0-green)](LICENSE)
[![Python](https://img.shields.io/badge/Python-3.8+-blue)]()
[![PyTorch](https://img.shields.io/badge/PyTorch-2.0+-orange)]()

---

## 🎯 项目愿景

当前大模型的困境：
- 7B 模型需要 14GB+ 显存，普通用户望而却步
- 新增能力需要全量重训，成本高昂
- 知识更新导致灾难性遗忘

**ModularBase 的答案**：将大模型拆解为「极简基座 + 可插拔数据包」

```
传统大模型:  [████████████████████████████] 7B 参数，不可分割

ModularBase: [基座 0.5B] + [路由包] + [对话包] + [代码包] + [医疗包] + ...
                 ↑            ↑           ↑          ↑          ↑
               常驻        常驻        常驻      按需加载   按需加载
```

## ✨ 核心特性

| 特性 | 说明 |
|------|------|
| **极低显存** | 4GB 显卡流畅运行，常驻仅需 ~1.6GB |
| **模块化能力** | 数据包独立训练、独立更新，互不影响 |
| **按需加载** | 只加载当前任务需要的能力包 |
| **无遗忘** | 新增能力不影响已有能力 |
| **易扩展** | 添加新领域只需训练新数据包 |

## 🏗️ 架构概览

```
┌─────────────────────────────────────────────────────────────┐
│                     常驻部分 (~1.6GB)                        │
│  ┌─────────────────────────────────────────────────────┐   │
│  │              基座核心 (理解 + 调度 + 融合)             │   │
│  └─────────────────────────────────────────────────────┘   │
│  ┌──────────────┐              ┌──────────────┐           │
│  │   路由包     │              │  通用对话包   │           │
│  └──────────────┘              └──────────────┘           │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼ 按需加载
┌─────────────────────────────────────────────────────────────┐
│  ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐   │
│  │代码生成│ │ 推理   │ │ 医疗   │ │ 法律   │ │ 创意   │   │
│  │  包    │ │引擎包  │ │问答包  │ │咨询包  │ │写作包  │   │
│  └────────┘ └────────┘ └────────┘ └────────┘ └────────┘   │
└─────────────────────────────────────────────────────────────┘
```

## 📊 显存对比

| 方案 | 显存需求 | 能力扩展 | 更新成本 |
|------|----------|----------|----------|
| Llama-7B | 14GB+ | 全量重训 | 高 |
| Qwen-1.8B | 4GB | 全量重训 | 中 |
| **ModularBase** | **~2-3GB** | **加数据包** | **低** |

## 🚀 快速开始

```bash
# 克隆项目
git clone https://github.com/your-username/ModularBase.git
cd ModularBase

# 创建虚拟环境
python -m venv venv
source venv/bin/activate  # Linux/Mac
# 或 .\venv\Scripts\activate  # Windows

# 安装依赖
pip install -r requirements.txt

# 下载训练数据
python scripts/download_data.py

# 训练基座模型
python scripts/train_base.py

# 训练数据包
python scripts/train_packs.py

# 测试推理
python scripts/test_inference.py
```

## 📁 项目结构

```
ModularBase/
├── docs_cn/                    # 中文文档
├── docs_en/                    # 英文文档
├── modular_base/               # 核心实现
│   ├── model/                  # 模型定义 (基座、数据包、路由)
│   ├── engine/                 # 推理引擎 (包管理、上下文压缩)
│   └── training/               # 训练工具
├── scripts/                    # 训练和测试脚本
├── packs/                      # 训练好的数据包
├── data/                       # 训练数据
└── src/                        # 串行流式推理引擎 (CardInfer)
```

## 🗺️ 开发路线

### Phase 1: 架构验证 ✅
- [x] 核心架构设计
- [x] 基座 + 数据包 + 路由实现
- [x] 推理引擎原型
- [x] 小规模训练验证

### Phase 2: 模型训练 🚧 进行中
- [ ] 大规模数据训练 (50K-200K)
- [ ] 基座模型优化
- [ ] 核心数据包训练

### Phase 3: 性能优化
- [ ] INT8/INT4 量化
- [ ] KV Cache 压缩
- [ ] C++ 推理引擎

### Phase 4: 生态建设
- [ ] 数据包开发工具
- [ ] 数据包市场
- [ ] 社区贡献指南

## 📖 文档

| 文档 | 说明 |
|------|------|
| [架构设计](architecture.md) | 核心架构和设计决策 |
| [优化方案](optimization.md) | 性能、工程、鲁棒性优化 |
| [开发进度](progress.md) | 当前状态和下一步计划 |
| [CardInfer](cardinfer.md) | 串行流式推理引擎 |
| [路线图](roadmap.md) | 开发路线图 |
| [贡献指南](contributing.md) | 如何参与贡献 |

## 🤝 参与贡献

项目处于早期开发阶段，欢迎：
- 🌟 Star 关注项目进展
- 💡 Issue 讨论架构设计
- 🔧 PR 贡献代码

详见 [贡献指南](contributing.md)

## 📄 License

Apache 2.0

---

> **"AI 的未来不应该只属于拥有顶级硬件的少数人"**
